# Sprint Plan – Sprint 2026-01-10

- Zweck: Scrumban Replenishment für das erste MVP-Feature-Increment (nach grünem CI).
- Zielgruppe: Team, PO/Stakeholder
- Scope: Sprint Backlog + Refinement Queue (nur „Ready“ wird committed)
- Out-of-Scope: Borrowing/My Borrowed Books; Book Details View; Admin-Flows
- Owner: Scrum Master / Team
- Last Updated: 2026-01-05
- Status: Draft

## Rahmen
- Sprint: 2026-01-10 – 2026-01-16 (1 Woche) *(bitte bestätigen/ändern)*
- Kapazität: 1 Person *(bitte bestätigen/ändern)*
- Board-States: Backlog, ToDo, In Progress, Code Review, Testing, Done
- WIP-Limit: 3 (global für aktive States: In Progress + Code Review + Testing)

Definition of Done (Referenz): `.bmad-core/checklists/story-dod-checklist.md`

## Sprint Goal
Ein Student kann sich in der Mobile App selbst registrieren (Schul-Domain), E-Mail-Verifikation ist aktiv, danach kann er sich anmelden und den Buchkatalog laden (Backend APIs mit JWT-Protection).

## Sprint Backlog (Committed)
| Prio | Story-ID | Titel | Size | Why | Dependencies | Owner | DoR ok? |
|---:|---|---|---:|---|---|---|---|
| 1 | US-USR-02 (Slice A) | Self-Registration Minimal Slice: Domain-Check + Email Verification (Keycloak) + Mobile UI | 5 SP *(Annahme)* | Ohne Registrierung braucht ihr manuelle Test-User/Imports; Onboarding ist MVP Phase 1 | Keycloak Registration aktiviert; SMTP/Test-Mailer verfügbar; allowed domains definiert | Team | Ja* |
| 2 | US-USR-01 (Slice A) | Authentication Minimal Slice: Backend JWT + Mobile Login/Token | 3 SP *(Annahme)* | Enabler für geschützte APIs (Katalog erfordert JWT) | Keycloak erreichbar; Realm/Clients konfiguriert; Redirect URIs | Team | Ja* |
| 3 | US-CAT-01 (Slice A) | Book Catalog Browsing Minimal Slice: GET /api/v1/books + Mobile Katalogliste | 3 SP *(Annahme)* | Erster sichtbarer Nutzen nach Onboarding | Auth Slice A fertig; Seed/Testdaten für Books | Team | Ja |

*DoR Hinweis:* US-USR-01/02 sind groß; für Commitment wird hier explizit je ein „Slice A“ committed (nur Registration+Verification bzw. Login+JWT), nicht die vollständigen Stories inkl. Rate-Limiting/Captcha, Passwort-Reset, Security-Audit, MFA.

**Tasks (pro Story, 3–7 Headlines):**
- US-USR-02 (Slice A)
  - Keycloak: Registration + Verify Email aktivieren; SMTP/Test-Mailer konfigurieren
  - Domain-Policy definieren (allowed domains) und technisch abbilden (Keycloak/Backend-Guard)
  - Mobile: Registration Screen (laut Prototype) + „Verify your email“-Status
  - Smoke-Test: Registrierung → Verifikationsmail → Login möglich
- US-USR-01 (Slice A)
  - Keycloak Dev-Konfiguration prüfen/ergänzen (Realm, Clients, Redirect URIs)
  - Backend: OAuth2 Resource Server JWT-Validation + Role-Mapping minimal
  - Mobile: Login-Flow + Secure Token Storage + Auth-Header für API Calls
  - Smoke-Test: Login → API Call erfolgreich; 401/403 Handling
- US-CAT-01 (Slice A)
  - Backend: GET `/api/v1/books` (Pagination/Sort) + DTO
  - Backend: minimaler Seed/Testdatensatz, damit UI etwas anzeigen kann
  - Mobile: BookCatalogScreen (List wie Prototype minimal) + Loading/Error/Empty
  - Integration: Katalog lädt nach Login

## Carry-Over / WIP-Finish-First
- Finish-first Reihenfolge: US-USR-02 Slice A → US-USR-01 Slice A → US-CAT-01 Slice A.

## Risiken & Impediments
- Keycloak/Realm-Konfiguration ist unklar oder nicht reproduzierbar → Mitigation: Dev-Realm/Clients als „Source of Truth“ dokumentieren; Owner: Team
- E-Mail-Verifikation hängt an SMTP/Delivery → Mitigation: Test-Mailer/Dev-SMTP (z. B. Mailhog/Mailpit) in Dev/Staging; Owner: Team
- Fehlende realistische Buchdaten blockieren UI-Verifikation → Mitigation: minimaler Seed für Katalog/Suche; Owner: Team
- Auth-Story ist groß (Scope-Creep) → Mitigation: Slice strikt auf Login+JWT+Tokenhandling begrenzen; Owner: Scrum Master/Team

## Refinement Queue (Nicht committed)
- US-USR-02-REF Self-Registration: Abuse-Protection (Rate limiting/Captcha) + Role-Assignment Regeln finalisieren
- US-CAT-02-REF Book Search: Slicing + API Contract finalisieren (Response wie /books)
- US-CAT-03-REF Book Details View (MVP Phase 2): Slicing (ohne Bewertungen/Share/Hero als erstes)
- US-LEN-01/02-REF Lending: Policies finalisieren (Limits/Fristen), Datenmodell (Borrowing/Copy), Transaktionsstrategie

## Kommunikations- und Zeremonienplan
- Daily: 15 Min (Flow/WIP: Finish > Start)
- Replenishment/Planning: 30–45 Min nach Bedarf (spätestens bei Blockern)
- Review: letzter Sprint-Tag, Demo: Registrierung → E-Mail-Verifikation → Login → Katalog
- Retro: direkt nach Review (30 Min)

## Offene Klärungen (max. 3) für Sprint-Commitment
1. Sprintdaten & Länge: bleibt es bei 1 Woche (2026-01-10 – 2026-01-16)?
2. Kapazität: weiterhin 1 Person oder mehr / Abwesenheiten?
3. Domain-Policy: Welche erlaubten Schul-Domänen gelten initial (z. B. nur `@schule.de` oder Liste)?
